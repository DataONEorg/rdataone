<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Upload a DataPackage to a DataONE member node. — uploadDataPackage • dataone</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Upload a DataPackage to a DataONE member node. — uploadDataPackage" />
<meta property="og:description" content="Upload all DataObjects contained in the DataPackage by calling uploadDataObject
on each of the members. Also a resourceMap object is created from the
recorded relationships between DataObjects, and this is uploaded as well." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dataone</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.2.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/v01-dataone-overview.html">dataone Package Overview</a>
    </li>
    <li>
      <a href="../articles/v02-dataone-federation.html">DataONE Federation</a>
    </li>
    <li>
      <a href="../articles/v03-searching-dataone.html">Searching DataONE Data Holdings</a>
    </li>
    <li>
      <a href="../articles/v04-download-data.html">Downloading Data From DataONE</a>
    </li>
    <li>
      <a href="../articles/v05-upload-data.html">Uploading Datasets to DataONE</a>
    </li>
    <li>
      <a href="../articles/v06-update-package.html">Updating Datasets on DataONE</a>
    </li>
    <li>
      <a href="../articles/v07-known-issues.html">Known Issues</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/DataONEorg/rdataone/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Upload a DataPackage to a DataONE member node.</h1>
    <small class="dont-index">Source: <a href='https://github.com/DataONEorg/rdataone/blob/master/R/D1Client.R'><code>R/D1Client.R</code></a></small>
    <div class="hidden name"><code>uploadDataPackage.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Upload all DataObjects contained in the DataPackage by calling <code><a href='uploadDataObject.html'>uploadDataObject</a></code>
on each of the members. Also a resourceMap object is created from the
recorded relationships between DataObjects, and this is uploaded as well.</p>
    </div>

    <pre class="usage"><span class='fu'>uploadDataPackage</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for D1Client</span>
<span class='fu'>uploadDataPackage</span><span class='op'>(</span>
  <span class='va'>x</span>,
  <span class='va'>dp</span>,
  replicate <span class='op'>=</span> <span class='cn'>NA</span>,
  numberReplicas <span class='op'>=</span> <span class='cn'>NA</span>,
  preferredNodes <span class='op'>=</span> <span class='cn'>NA</span>,
  public <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/logical.html'>as.logical</a></span><span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span>,
  accessRules <span class='op'>=</span> <span class='cn'>NA</span>,
  quiet <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/logical.html'>as.logical</a></span><span class='op'>(</span><span class='cn'>TRUE</span><span class='op'>)</span>,
  resolveURI <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='cn'>NA</span><span class='op'>)</span>,
  packageId <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='cn'>NA</span><span class='op'>)</span>,
  as <span class='op'>=</span> <span class='st'>"character"</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>A D1Client instance.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>(Not yet used.)</p></td>
    </tr>
    <tr>
      <th>dp</th>
      <td><p>The DataPackage instance to be submitted to DataONE for creation.</p></td>
    </tr>
    <tr>
      <th>replicate</th>
      <td><p>A value of type <code>"logical"</code>, if TRUE then DataONE will replicate this object to other member nodes</p></td>
    </tr>
    <tr>
      <th>numberReplicas</th>
      <td><p>A value of type <code>"numeric"</code>, for number of supported replicas.</p></td>
    </tr>
    <tr>
      <th>preferredNodes</th>
      <td><p>A list of <code>"character"</code>, each of which is the node identifier for a node to which a replica should be sent.</p></td>
    </tr>
    <tr>
      <th>public</th>
      <td><p>A <code>'logical'</code>, if TRUE then all objects in this package will be accessible by any user</p></td>
    </tr>
    <tr>
      <th>accessRules</th>
      <td><p>Access rules of <code>'data.frame'</code> that will be added to the access policy of each object in the datapackage.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>A <code>'logical'</code>. If TRUE (the default) then informational messages will not be printed.</p></td>
    </tr>
    <tr>
      <th>resolveURI</th>
      <td><p>A URI to prepend to identifiers (i.e. for use when creating the ResourceMap). See <a href='https://docs.ropensci.org/datapack/reference/serializePackage.html'>serializePackage</a></p></td>
    </tr>
    <tr>
      <th>packageId</th>
      <td><p>A value of type <code>"character"</code> specifying a unique identifier to use for the uploaded package (resource map pid)</p></td>
    </tr>
    <tr>
      <th>as</th>
      <td><p>A value of type <code>"character"</code> that specifies the return value. Possible values are <code>"character"</code> (the default) or <code>"DataPackage"</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>id The identifier of the resource map for this data package</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The DataPackage describes the collection of data object and their associated 
metadata object, with the relationships and members serialized into a document
stored under, and retrievable with, the packageId as it's own distinct object.
Any objects in the data map that have a dateUploaded value are assumed to be 
pre-existing in the system, and skipped.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Member objects are created serially, and most errors in creating one object will 
interrupt the create process for the whole, with the result that some members will 
be created, and the remainder not.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='D1Client-class.html'>D1Client</a></code> class description.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/DataONEorg/rdataone'>dataone</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://docs.ropensci.org/datapack/'>datapack</a></span><span class='op'>)</span>
<span class='va'>dp</span> <span class='op'>&lt;-</span> <span class='fu'>new</span><span class='op'>(</span><span class='st'>"DataPackage"</span><span class='op'>)</span>
<span class='va'>sampleData</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata/sample.csv"</span>, package<span class='op'>=</span><span class='st'>"dataone"</span><span class='op'>)</span>
<span class='va'>dataObj</span> <span class='op'>&lt;-</span> <span class='fu'>new</span><span class='op'>(</span><span class='st'>"DataObject"</span>, format<span class='op'>=</span><span class='st'>"text/csv"</span>, file<span class='op'>=</span><span class='va'>sampleData</span><span class='op'>)</span>
<span class='va'>dataObj</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://docs.ropensci.org/datapack/reference/setPublicAccess.html'>setPublicAccess</a></span><span class='op'>(</span><span class='va'>dataObj</span><span class='op'>)</span>
<span class='va'>sampleEML</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"extdata/strix-pacific-northwest.xml"</span>, package<span class='op'>=</span><span class='st'>"dataone"</span><span class='op'>)</span>
<span class='va'>metadataObj</span> <span class='op'>&lt;-</span> <span class='fu'>new</span><span class='op'>(</span><span class='st'>"DataObject"</span>, format<span class='op'>=</span><span class='st'>"eml://ecoinformatics.org/eml-2.1.1"</span>, file<span class='op'>=</span><span class='va'>sampleEML</span><span class='op'>)</span>
<span class='va'>metadataObj</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://docs.ropensci.org/datapack/reference/setPublicAccess.html'>setPublicAccess</a></span><span class='op'>(</span><span class='va'>metadataObj</span><span class='op'>)</span>
<span class='va'>dp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://docs.ropensci.org/datapack/reference/addMember.html'>addMember</a></span><span class='op'>(</span><span class='va'>dp</span>, do <span class='op'>=</span> <span class='va'>dataObj</span>, mo <span class='op'>=</span> <span class='va'>metadataObj</span><span class='op'>)</span>
<span class='va'>d1c</span> <span class='op'>&lt;-</span> <span class='fu'><a href='D1Client.html'>D1Client</a></span><span class='op'>(</span><span class='st'>"STAGING"</span>, <span class='st'>"urn:node:mnStageUCSB2"</span><span class='op'>)</span>
<span class='co'># Upload all members of the DataPackage to DataONE (requires authentication)</span>
<span class='va'>packageId</span> <span class='op'>&lt;-</span> <span class='fu'>uploadDataPackage</span><span class='op'>(</span><span class='va'>d1c</span>, <span class='va'>dp</span>, replicate<span class='op'>=</span><span class='cn'>TRUE</span>, public<span class='op'>=</span><span class='cn'>TRUE</span>, numberReplicas<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Matthew B. Jones, Peter Slaughter, Rob Nahf, Carl Boettiger, Chris Jones, Bryce Mecum, Jeanette Clark, Lauren Walker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


