<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>R Interface to the DataONE REST API â€¢ dataone</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="R Interface to the DataONE REST API">
<meta property="og:description" content="Provides read and write access to data and metadata from
    the DataONE network &lt;https://www.dataone.org&gt; of data repositories.  
    Each DataONE repository implements a consistent repository application 
    programming interface. Users call methods in R to access these remote 
    repository functions, such as methods to query the metadata catalog, get 
    access to metadata for particular data packages, and read the data objects 
    from the data repository. Users can also insert and update data objects on 
    repositories that support these methods.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">dataone</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/v01-dataone-overview.html">dataone Package Overview</a>
    </li>
    <li>
      <a href="articles/v02-dataone-federation.html">DataONE Federation</a>
    </li>
    <li>
      <a href="articles/v03-searching-dataone.html">Searching DataONE Data Holdings</a>
    </li>
    <li>
      <a href="articles/v04-download-data.html">Downloading Data From DataONE</a>
    </li>
    <li>
      <a href="articles/v05-upload-data.html">Uploading Datasets to DataONE</a>
    </li>
    <li>
      <a href="articles/v06-update-package.html">Updating Datasets on DataONE</a>
    </li>
    <li>
      <a href="articles/v07-known-issues.html">Known Issues</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/DataONEorg/rdataone/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="dataone-r-interface-to-the-dataone-network-of-data-repositories" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#dataone-r-interface-to-the-dataone-network-of-data-repositories" class="anchor"></a>dataone: R interface to the DataONE network of data repositories</h1></div>

<ul>
<li>
<strong>Authors</strong>: Matthew B. Jones (<a href="https://www.nceas.ucsb.edu">NCEAS</a>), Peter Slaughter, Rob Nahf, Carl Boettiger, Chris Jones, Jordan Read, Lauren Walker, Edmund Hart, Scott Chamberlain</li>
<li><a href="https://doi.org/10.5063/F1M61H5X">doi:10.5063/F1M61H5X</a></li>
<li>
<strong>License</strong>: <a href="https://opensource.org/licenses/Apache-2.0">Apache 2</a>
</li>
<li><a href="https://github.com/DataONEorg/rdataone">Package source code on Github</a></li>
<li><a href="https://github.com/DataONEorg/rdataone/issues"><strong>Submit Bugs and feature requests</strong></a></li>
</ul>
<p>Provides read and write access to data and metadata from the <a href="https://www.dataone.org/current-member-nodes">DataONE network of data repositories</a>, including the <a href="https://knb.ecoinformatics.org">KNB Data Repository</a>, <a href="https://datadryad.org/stash">Dryad</a>, and the NSF <a href="https://arcticdata.io">Arctic Data Center</a>. Each DataONE repository implements a consistent repository application programming interface. Users call methods in R to access these remote repository functions, such as methods to query the metadata catalog, get access to metadata for particular data packages, and read the data objects from the data repository using the global identifier for each data object. Users can also insert and update data objects on repositories that support these methods. For more details, see the vignettes.</p>
<div id="installation-notes" class="section level2">
<h2 class="hasAnchor">
<a href="#installation-notes" class="anchor"></a>Installation Notes</h2>
<p>Version 2.0 of the <em>dataone</em> R package removes the dependency on rJava and significantly changes the base API to correspond to the published <a href="https://purl.dataone.org/architecture/apis/index.html">DataONE API</a>. Previous methods for accessing DataONE will be maintained, but new methods have been added.</p>
<p>The <em>dataone</em> R package requires the R package <em>redland</em>. If you are installing on Ubuntu then the Redland C libraries must be installed first. If you are installing on Mac OS X or Windows then installing these libraries is not required.</p>
<div id="installing-on-mac-os-x" class="section level3">
<h3 class="hasAnchor">
<a href="#installing-on-mac-os-x" class="anchor"></a>Installing on Mac OS X</h3>
<p>On Mac OS X dataone can be installed with the following commands:</p>
<pre><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("dataone")
library(dataone)</a></code></pre>
<p>The <em>dataone</em> R package should be available for use at this point.</p>
</div>
<div id="installing-on-ubuntu" class="section level3">
<h3 class="hasAnchor">
<a href="#installing-on-ubuntu" class="anchor"></a>Installing on Ubuntu</h3>
<p>For ubuntu, install the required Redland C libraries by entering the following commands in a terminal window:</p>
<pre><code>sudo apt-get update
sudo apt-get install librdf0 librdf0-dev</code></pre>
<p>Then install the R packages from the R console:</p>
<pre><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("dataone")
library(dataone)</a></code></pre>
<p>The <em>dataone</em> R package should be available for use at this point</p>
</div>
<div id="installing-on-windows" class="section level3">
<h3 class="hasAnchor">
<a href="#installing-on-windows" class="anchor"></a>Installing on Windows</h3>
<p>For windows, the required <em>redland</em> R package is distributed as a binary release, so it is not necessary to install any additional system libraries.</p>
<p>To install the <em>dataone</em> R packages from the R console:</p>
<pre><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("dataone")
library(dataone)</a></code></pre>
<p>The <em>dataone</em> R package should be available for use at this point.</p>
</div>
</div>
<div id="quick-start" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-start" class="anchor"></a>Quick Start</h2>
<p>See the full manual (<code><a href="reference/dataone.html">help(dataone)</a></code>) for documentation.</p>
<p>To search the DataONE Federation Member Node <em>Knowledge Network for Biocomplexity (KNB)</em> for a dataset:</p>
<pre><code><a href="https://github.com/DataONEorg/rdataone">library(dataone)
cn &lt;- CNode("PROD")
mn &lt;- getMNode(cn, "urn:node:KNB")
mySearchTerms &lt;- list(q="abstract:salmon+AND+keywords:spawn+AND+keywords:chinook",
                      fl="id,title,dateUploaded,abstract,size",
                      fq="dateUploaded:[2017-06-01T00:00:00.000Z TO 2017-07-01T00:00:00.000Z]",
                      sort="dateUploaded+desc")
result &lt;- query(mn, solrQuery=mySearchTerms, as="data.frame")
result[1,c("id", "title")]
id &lt;- result[1,'id']</a></code></pre>
<p>The metadata file that describes the located research can be downloaded and viewed in an XML viewer, text editor after being written to disk, or in R via the commands below:</p>
<pre><code><a href="http://www.omegahat.net/RSXML">library(XML)
metadata &lt;- rawToChar(getObject(mn, id))
doc &lt;- xmlRoot(xmlTreeParse(metadata, asText=TRUE, trim = TRUE, ignoreBlanks = TRUE))
tf &lt;- tempfile()
saveXML(doc, tf)
file.show(tf)</a></code></pre>
<p>This metadata file describes a data file (CSV) in this data collection (package) that can be obtained using the listed identifier, using the commands:</p>
<pre><code>dataRaw &lt;- getObject(mn, "urn:uuid:49d7a4bc-e4c9-4609-b9a7-9033faf575e0")
dataChar &lt;- rawToChar(dataRaw)
theData &lt;- textConnection(dataChar)
df &lt;- read.csv(theData, stringsAsFactors=FALSE)
df[1,]</code></pre>
<p>Uploading a CSV file to a DataONE Member Node requires user authentication. DataONE user authentication is described in the vignette <code>dataone-federation</code>.</p>
<p>Once the authentication steps have been followed, uploading is done with:</p>
<pre><code><a href="https://docs.ropensci.org/datapack/">library(datapack)
library(uuid)
d1c &lt;- D1Client("STAGING", "urn:node:mnStageUCSB2")
id &lt;- paste("urn:uuid:", UUIDgenerate(), sep="")
testdf &lt;- data.frame(x=1:10,y=11:20)
csvfile &lt;- paste(tempfile(), ".csv", sep="")
write.csv(testdf, csvfile, row.names=FALSE)
# Build a DataObject containing the csv, and upload it to the Member Node
d1Object &lt;- new("DataObject", id, format="text/csv", filename=csvfile)
uploadDataObject(d1c, d1Object, public=TRUE)</a></code></pre>
<p>In addition, a collection of science metadata and data can be downloaded with one command, for example:</p>
<pre><code>d1c &lt;- D1Client("PROD", "urn:node:KNB")
pkg &lt;- getDataPackage(d1c, id="urn:uuid:04cd34fd-25d4-447f-ab6e-73a572c5d383", quiet=FALSE)</code></pre>
<p>See the R vignette <a href="https://github.com/DataONEorg/rdataone/blob/master/vignettes/v01-dataone-overview.Rmd">dataone R Package</a> for more information.</p>
</div>
<div id="acknowledgments" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgments" class="anchor"></a>Acknowledgments</h2>
<p>Work on this package was supported by:</p>
<ul>
<li>NSF-ABI grant #1262458 to C. Gries, M. B. Jones, and S. Collins.</li>
<li>NSF-DATANET grants #0830944 and #1430508 to W. Michener, M. B. Jones, D. Vieglais, S. Allard and P. Cruse</li>
<li>NSF DIBBS grant #1443062 to T. Habermann and M. B. Jones</li>
<li>NSF-PLR grant #1546024 to M. B. Jones, S. Baker-Yeboah, J. Dozier, M. Schildhauer, and A. Budden</li>
</ul>
<p>Additional support was provided for working group collaboration by the National Center for Ecological Analysis and Synthesis, a Center funded by the University of California, Santa Barbara, and the State of California.</p>
<p><a href="https://www.nceas.ucsb.edu"><img src="https://live-ncea-ucsb-edu-v01.pantheonsite.io/sites/default/files/2020-03/NCEAS-full%20logo-4C.png" alt="nceas_footer"></a></p>
<p><a href="https://www.dataone.org"><img src="https://www.dataone.org/sites/all/images/DataONE_LOGO.jpg" alt="dataone_footer"></a></p>
<p><a href="https://ropensci.org"><img src="https://ropensci.org/public_images/github_footer.png" alt="ropensci_footer"></a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=dataone">https://â€‹cloud.r-project.org/â€‹package=dataone</a>
</li>
<li>Browse source code at <br><a href="https://github.com/DataONEorg/rdataone/">https://â€‹github.com/â€‹DataONEorg/â€‹rdataone/â€‹</a>
</li>
<li>Report a bug at <br><a href="https://github.com/DataONEorg/rdataone/issues">https://â€‹github.com/â€‹DataONEorg/â€‹rdataone/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>Apache License 2.0</li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing dataone</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Matthew B. Jones <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-0077-4738" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Peter Slaughter <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-2192-403X" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Rob Nahf <br><small class="roles"> Author </small>  </li>
<li>Carl Boettiger <br><small class="roles"> Author </small>  </li>
<li>Chris Jones <br><small class="roles"> Author </small>  </li>
<li>Bryce Mecum <br><small class="roles"> Author </small>  </li>
<li>Jeanette Clark <br><small class="roles"> Author </small>  </li>
<li>Lauren Walker <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cran.r-project.org/package=dataone"><img src="https://www.r-pkg.org/badges/version/dataone" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://travis-ci.org/DataONEorg/rdataone"><img src="https://travis-ci.org/DataONEorg/rdataone.png?branch=master" alt="Build Status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Matthew B. Jones, Peter Slaughter, Rob Nahf, Carl Boettiger, Chris Jones, Bryce Mecum, Jeanette Clark, Lauren Walker.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
